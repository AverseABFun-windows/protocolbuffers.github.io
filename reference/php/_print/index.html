<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.108.0"><link rel=canonical type=text/html href=https://protobuf.dev/reference/php/><link rel=alternate type=application/rss+xml href=https://protobuf.dev/reference/php/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>PHP Reference | Protocol Buffers Documentation</title><meta name=description content="This section contains reference documentation for working with protocol buffer classes in PHP"><meta property="og:title" content="PHP Reference"><meta property="og:description" content="This section contains reference documentation for working with protocol buffer classes in PHP"><meta property="og:type" content="website"><meta property="og:url" content="https://protobuf.dev/reference/php/"><meta property="og:site_name" content="Protocol Buffers Documentation"><meta itemprop=name content="PHP Reference"><meta itemprop=description content="This section contains reference documentation for working with protocol buffer classes in PHP"><meta name=twitter:card content="summary"><meta name=twitter:title content="PHP Reference"><meta name=twitter:description content="This section contains reference documentation for working with protocol buffer classes in PHP"><link rel=preload href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css as=style><link href=/scss/main.min.def2cdda5cfcd95d9660c969a68946395435ad5fc75402be473d9995c7e926b3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/reference/php/>Return to the regular view of this page</a>.</p></div><h1 class=title>PHP Reference</h1><div class=lead>This section contains reference documentation for working with protocol buffer classes in PHP</div><ul><li>1: <a href=#pg-07f5648dc235410e80d72701847d0106>PHP API</a></li><li>2: <a href=#pg-163abb538cd7a7251d32693651de18dc>PHP Generated Code Guide</a></li></ul><div class=content><ul><li><a href=/reference/php/php-generated>PHP Generated Code Guide</a></li><li><a href=/reference/php/api-docs>PHP API</a></li></ul></div></div><div class=td-content><h1 id=pg-07f5648dc235410e80d72701847d0106>1 - PHP API</h1></div><div class=td-content style=page-break-before:always><h1 id=pg-163abb538cd7a7251d32693651de18dc>2 - PHP Generated Code Guide</h1><div class=lead>This topic describes the PHP code that the protocol buffer compiler generates for any given protocol definition.</div><p>This page describes the PHP code that the protocol buffer compiler generates for
any given protocol definition. You should read the
<a href=/programming-guides/proto3>proto3 language guide</a> before reading this
document. Note that the protocol buffer compiler currently only supports proto3
code generation for PHP.</p><h2 id=invocation>Compiler Invocation</h2><p>The protocol buffer compiler produces PHP output when invoked with the
<code>--php_out=</code> command-line flag. The parameter to the <code>--php_out=</code> option is the
directory where you want the compiler to write your PHP output. In order to
conform to PSR-4, the compiler creates a sub-directory corresponding to the
package defined in the proto file. In addition, for each message in the proto
file input the compiler creates a separate file in the package&rsquo;s subdirectory.
The names of the output files of messages are composed of three parts:</p><ul><li>Base directory: The proto path (specified with the <code>--proto_path=</code> or <code>-I</code>
command-line flag) is replaced with the output path (specified with the
<code>--php_out=</code> flag).</li><li>Sub-directory: <code>.</code> in the package name are replaced by the operating system
directory separator. Each package name component is capitalized.</li><li>File: The message name is appended by <code>.php</code>.</li></ul><p>So, for example, let&rsquo;s say you invoke the compiler as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --php_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/example.proto
</span></span></code></pre></div><p>And <code>src/example.proto</code> is defined as:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyMessage</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will read the files <code>src/foo.proto</code> and produce the output file:
<code>build/gen/Foo/Bar/MyMessage.php</code>. The compiler will automatically create the
directory <code>build/gen/Foo/Bar</code> if necessary, but it will <em>not</em> create <code>build</code> or
<code>build/gen</code>; they must already exist.</p><h2 id=package>Packages</h2><p>The package name defined in the <code>.proto</code> file is used to generate a module
structure for the generated PHP classes. Given a file like:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MyMessage</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol compiler generates an output class with the name
<code>Foo\Bar\MyMessage</code>.</p><h2 id=message>Messages</h2><p>Given a simple message declaration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The protocol buffer compiler generates a PHP class called <code>Foo</code>. This class
inherits from a common base class, <code>Google\Protobuf\Internal\Message</code>, which
provides methods for encoding and decoding your message types, as shown in the
following example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$from</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>Foo</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setInt32</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setString</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;a&#39;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getRepeatedInt32</span><span style=color:#000;font-weight:700>()[]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getMapInt32Int32</span><span style=color:#000;font-weight:700>()[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>$from</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>serializeToString</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>try</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>$to</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>mergeFromString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$data</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>$e</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Handle parsing error from invalid data.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#ce5c00;font-weight:700>...</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>You should <em>not</em> create your own <code>Foo</code> subclasses. Generated classes are not
designed for subclassing and may lead to "fragile base class" problems.</p><p>Nested messages result in a PHP class of the same name prefixed by their
containing message and separated by underscores, as PHP doesn&rsquo;t support nested
classes. So, for example, if you have this in your <code>.proto</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>NestedMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler will generate the following classes:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>a</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// PHP doesn’t support nested classes.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage_NestedMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>If the message class name is reserved (for example, <code>Empty</code>), the prefix <code>PB</code> is
prepended to the class name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>PBEmpty</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>We have also provided the file level option <code>php_class_prefix</code>. If this is
specified, it is prepended to all generated message classes.</p><h2 id=fields>Fields</h2><p>For each field in a message type, there are accessor methods to set and get the
field. So given a field <code>x</code> you can write:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MyMessage</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setX</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>$val</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getX</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>$a</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setX</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$a</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>Whenever you set a field, the value is type-checked against the declared type of
that field. If the value is of the wrong type (or out of range), an exception
will be raised. By default type conversions (for example, when assigning a value
to a field or adding an element to a repeated field) are permitted to and from
integer, float, and numeric strings. Conversions that are not permitted include
all conversions to/from arrays or objects. Float to integer overflow conversions
are undefined.</p><p>You can see the corresponding PHP type for each scalar protocol buffers type in
the <a href=/programming-guides/proto3#scalar>scalar value types table</a>.</p><h3 id=embedded_message>Singular Message Fields</h3><p>A field with a message type defaults to nil, and is not automatically created
when the field is accessed. Thus you need to explicitly create sub messages, as
in the following:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MyMessage</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setZ</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SubMessage</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getZ</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setFoo</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>$m2</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MyMessage</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>$m2</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getZ</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setFoo</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>42</span><span style=color:#000;font-weight:700>);</span>  <span style=color:#8f5902;font-style:italic>// FAILS with an exception
</span></span></span></code></pre></div><p>You can assign any instance to a message field, even if the instance is also
held elsewhere (for example, as a field value on another message).</p><h3 id=repeated-fields>Repeated Fields</h3><p>The protocol buffer compiler generates a special <code>RepeatedField</code> for each
repeated field. So, for example, given the following field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The generated code lets you do this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getFoo</span><span style=color:#000;font-weight:700>()[]</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setFoo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$array</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=map-fields>Map Fields</h3><p>The protocol buffer compiler generates a <code>MapField</code> for each map field. So given
this field:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>You can do the following with the generated code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#000>$m</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>getWeight</span><span style=color:#000;font-weight:700>()[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h2 id=enum>Enumerations</h2><p>PHP doesn&rsquo;t have native enums, so instead the protocol buffer compiler generates
a PHP class for each enum type in your <code>.proto</code> file, just like for
<a href=#message>messages</a>, with constants defined for each value. So, given this
enum:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>TestEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Default</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler generates the following class:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestEnum</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>DEFAULT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Also as with messages, a nested enum will result in a PHP class of the same name
prefixed by its containing message(s) and separated with underscores, as PHP
does not support nested classes.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage_NestedEnum</span> <span style=color:#000;font-weight:700>{</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>If an enum class or value name is reserved (for example, <code>Empty</code>), the prefix
<code>PB</code> is prepended to the class or value name:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>PBEmpty</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>PBECHO</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>We have also provided the file level option <code>php_class_prefix</code>. If this is
specified, it is prepended to all generated enum classes.</p><h2 id=oneof>Oneof</h2><p>For a <a href=/programming-guides/proto3#oneof>oneof</a>s, the protocol
buffer compiler generates the same code as it would for regular singular fields,
but also adds a special accessor method that lets you find out which oneof field
(if any) is set. So, given this message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>test_oneof</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>oneof_int32</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int64</span> <span style=color:#000>oneof_int64</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>The compiler generates the following fields and special method:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>TestMessage</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>oneof_int32</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>oneof_int64</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>getOneofInt32</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>setOneofInt32</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$var</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>getOneofInt64</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>setOneofInt64</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$var</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>getTestOneof</span><span style=color:#000;font-weight:700>();</span>  <span style=color:#8f5902;font-style:italic>// Return field name
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The accessor method&rsquo;s name is based on the oneof&rsquo;s name, and returns an enum
value representing the field in the oneof that is currently set.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=40px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#fff data-fg=#000 data-position=bottom data-padding=16px data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.9bf72cb065abb58e9dd4b5b0081420fe52b7f1d05088aa753cd0a5cff0f04feb.js integrity="sha256-m/cssGWrtY6d1LWwCBQg/lK38dBQiKp1PNClz/DwT+s=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>